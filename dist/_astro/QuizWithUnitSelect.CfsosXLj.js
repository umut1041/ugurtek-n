import{j as e}from"./jsx-runtime.TBa3i5EZ.js";import{r as h}from"./index.CVf8TyFT.js";const q=({questions:c})=>{const[t,r]=h.useState(0),[n,u]=h.useState(null),[d,s]=h.useState(0),[i,x]=h.useState(!1),[l,a]=h.useState(!1),m=c[t],j=t===c.length-1,b=o=>{l||(u(o),a(!0),o===m.correct&&s(f=>f+1))},g=()=>{j?x(!0):(r(o=>o+1),u(null),a(!1))},w=()=>{r(0),u(null),s(0),x(!1),a(!1)};if(i){const o=Math.round(d/c.length*100);return e.jsx("div",{className:"quiz-game",children:e.jsxs("div",{className:"quiz-result",children:[e.jsx("h2",{children:"ðŸŽ¯ Quiz TamamlandÄ±!"}),e.jsxs("div",{className:"result-score",children:[e.jsxs("p",{className:"score-number",children:[d," / ",c.length]}),e.jsxs("p",{className:"score-percentage",children:["%",o]})]}),e.jsx("p",{className:"result-message",children:o>=80?"Harika! Ã‡ok iyi bildin! ðŸŽ‰":o>=60?"Ä°yi! Biraz daha Ã§alÄ±ÅŸmalÄ±sÄ±n. ðŸ‘":"Devam et! Daha fazla pratik yap. ðŸ’ª"}),e.jsx("button",{onClick:w,className:"reset-btn",children:"Tekrar Oyna"})]})})}return e.jsxs("div",{className:"quiz-game",children:[e.jsxs("div",{className:"quiz-header",children:[e.jsxs("div",{className:"quiz-progress",children:["Soru ",t+1," / ",c.length]}),e.jsxs("div",{className:"quiz-score",children:["Puan: ",d]})]}),e.jsxs("div",{className:"quiz-question",children:[e.jsx("h3",{children:m.question}),e.jsx("ul",{className:"quiz-options",children:m.options.map((o,f)=>{const N=n===f,k=f===m.correct,z=l&&N;return e.jsx("li",{children:e.jsxs("button",{className:`quiz-option ${z?k?"correct":"incorrect":N?"selected":""}`,onClick:()=>b(f),disabled:l,children:[o,z&&e.jsx("span",{className:"feedback-icon",children:k?" âœ“":" âœ—"})]})},f)})})]}),l&&e.jsxs("div",{className:"quiz-feedback",children:[n===m.correct?e.jsx("p",{className:"feedback-correct",children:"âœ“ DoÄŸru! Harika!"}):e.jsxs("p",{className:"feedback-incorrect",children:["âœ— YanlÄ±ÅŸ. DoÄŸru cevap: ",e.jsx("strong",{children:m.options[m.correct]})]}),e.jsx("button",{onClick:g,className:"next-btn",children:j?"SonuÃ§larÄ± GÃ¶r":"Sonraki Soru â†’"})]})]})};function p(c){const t=[...c];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}function S(c){if(!c.length)return[];const t=[],r=p(c);for(const n of r){const u=Math.random()<.5?"de-tr":"tr-de",d=r.filter(s=>s!==n);if(u==="de-tr"){const s=n.tr,i=[...new Set(d.map(a=>a.tr).filter(a=>a!==s))],x=p(i).slice(0,3),l=p([s,...x]);t.push({question:`Was bedeutet â€ž${n.de}"?`,options:l,correct:l.indexOf(s)})}else{const s=n.de,i=[...new Set(d.map(a=>a.de).filter(a=>a!==s))],x=p(i).slice(0,3),l=p([s,...x]);t.push({question:`Wie sagt man â€ž${n.tr}" auf Deutsch?`,options:l,correct:l.indexOf(s)})}}return t}const v=["ankommen","daheim","essen-trinken","arbeitswelt","sport-fitness","schule-ausbildung","feste-geschenke","am-wochenende","meine-sachen","kommunikation","unterwegs","reisen","auf-der-bank","lebensstationen"],M=({units:c})=>{const[t,r]=h.useState(null),n=h.useMemo(()=>{const s=new Map(c.map(i=>[i.id,i]));return v.map(i=>s.get(i)).filter(Boolean)},[c]),u=h.useMemo(()=>{if(!t)return null;const s=n.find(i=>i.id===t);return s?.words?.length?S(s.words):null},[t,n]),d=n.find(s=>s.id===t);return u&&u.length>0?e.jsxs("div",{className:"quiz-with-unit",children:[e.jsxs("div",{className:"quiz-unit-bar",children:[e.jsxs("span",{className:"quiz-unit-label",children:["Ãœnite: ",d?.title," (",d?.titleTr,")"]}),e.jsx("button",{type:"button",className:"quiz-back-units",onClick:()=>r(null),children:"â† BaÅŸka Ã¼nite seÃ§"})]}),e.jsx(q,{questions:u})]}):e.jsxs("div",{className:"quiz-with-unit",children:[e.jsxs("p",{className:"quiz-choose-unit-intro",children:["Ã–nce bir Ã¼nite seÃ§in. SeÃ§tiÄŸiniz Ã¼nitedeki ",e.jsx("strong",{children:"tÃ¼m kelimeler"})," ","Ã§oktan seÃ§meli sorulara dÃ¶nÃ¼ÅŸecek."]}),e.jsx("div",{className:"quiz-unit-grid",children:n.map((s,i)=>e.jsxs("button",{type:"button",className:"quiz-unit-card",onClick:()=>r(s.id),children:[e.jsx("span",{className:"quiz-unit-num",children:i+1}),e.jsx("span",{className:"quiz-unit-title",children:s.title}),e.jsx("span",{className:"quiz-unit-title-tr",children:s.titleTr}),e.jsxs("span",{className:"quiz-unit-words",children:[s.words.length," kelime"]})]},s.id))})]})};export{M as default};
