---
import MainLayout from "../../layouts/MainLayout.astro";
import rvData from "../../data/vocabulary/reflexive-verben.json";

const { meta, entries } = rvData;
---

<MainLayout
  title="Reflexive Verben"
  description="Dönüşlü fiiller listesi: Reflexivpronomen ile kullanılan fiiller ve örnek cümleler."
>
  <section>
    <p class="breadcrumb">
      <a href="/vocabulary">Kelime & Kalıplar</a> → Reflexive Verben
    </p>
    <h1>Reflexive Verben Liste</h1>
    <p class="rv-meta">
      <strong>{meta.titleTr}</strong>. {meta.note}
    </p>
  </section>

  <section>
    <p class="rv-legend">
      Reflexive fiiller cümlede <strong>sich</strong>, <strong>mich</strong>, <strong>uns</strong>, <strong>dich</strong>, <strong>euch</strong> gibi Reflexivpronomen ile kullanılır.
    </p>
    <label for="rv-search" class="visually-hidden">Fiil veya örnek cümle içinde ara</label>
    <input
      id="rv-search"
      type="search"
      class="rv-search"
      placeholder="Fiil veya örnek cümle içinde ara …"
      autocomplete="off"
    />
    <div class="rv-table-wrap">
      <table class="rv-table">
        <thead>
          <tr>
            <th>Reflexives Verb</th>
            <th>Beispielsatz</th>
          </tr>
        </thead>
        <tbody id="rv-tbody">
          {entries.map((entry: { verb: string; beispiel: string }) => (
            <tr
              class="rv-row"
              data-verb={entry.verb.toLowerCase()}
              data-beispiel={(entry.beispiel || "").toLowerCase()}
            >
              <td class="rv-verb"><strong>{entry.verb}</strong></td>
              <td class="rv-beispiel">{entry.beispiel}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
    <p class="rv-count">
      Toplam <strong>{entries.length}</strong> reflexive fiil.
    </p>
  </section>

  <section class="next-step">
    <h2>Sonraki adım</h2>
    <p>
      <a href="/vocabulary">Kelime sayfasına</a> dön, <a href="/vocabulary/verben-praepositionen">Verben mit Präpositionen</a> veya
      <a href="/grammar">Gramer</a> sayfasında Reflexivpronomen konusunu tekrarla.
    </p>
  </section>

  <script>
    (function () {
      const search = document.getElementById("rv-search") as HTMLInputElement;
      const tbody = document.getElementById("rv-tbody");
      if (!search || !tbody) return;

      const rows = tbody.querySelectorAll(".rv-row");

      function filter() {
        const q = (search.value || "").trim().toLowerCase();
        if (!q) {
          rows.forEach((el) => (el as HTMLElement).style.display = "");
          return;
        }
        rows.forEach((el) => {
          const verb = (el.getAttribute("data-verb") || "").includes(q);
          const beispiel = (el.getAttribute("data-beispiel") || "").includes(q);
          (el as HTMLElement).style.display = verb || beispiel ? "" : "none";
        });
      }

      search.addEventListener("input", filter);
      search.addEventListener("change", filter);
    })();
  </script>
</MainLayout>

<style>
  .breadcrumb {
    font-size: 0.9rem;
    color: #64748b;
    margin-bottom: 0.5rem;
  }
  .breadcrumb a:hover {
    color: #0f172a;
  }
  .rv-meta {
    margin-top: 0.5rem;
    color: #334155;
  }
  .rv-legend {
    margin-bottom: 0.75rem;
    font-size: 0.95rem;
    color: #475569;
  }
  .rv-search {
    width: 100%;
    max-width: 28rem;
    padding: 0.6rem 1rem;
    margin-bottom: 1rem;
    border: 1px solid #cbd5e1;
    border-radius: 0.5rem;
    font-size: 1rem;
  }
  .rv-search:focus {
    outline: 2px solid #22c55e;
    outline-offset: 2px;
  }
  .rv-table-wrap {
    overflow-x: auto;
    border-radius: 0.5rem;
    border: 1px solid #e2e8f0;
    margin-bottom: 0.75rem;
  }
  .rv-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95rem;
  }
  .rv-table th,
  .rv-table td {
    padding: 0.6rem 1rem;
    text-align: left;
    border-bottom: 1px solid #f1f5f9;
  }
  .rv-table th {
    background: #f8fafc;
    font-weight: 600;
    color: #0f172a;
  }
  .rv-table th:first-child {
    width: 18rem;
  }
  .rv-table tbody tr:hover {
    background: #f8fafc;
  }
  .rv-verb {
    color: #0f172a;
    white-space: nowrap;
  }
  .rv-beispiel {
    color: #475569;
  }
  .rv-count {
    font-size: 0.9rem;
    color: #64748b;
  }
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
  }
  @media (max-width: 640px) {
    .rv-table th,
    .rv-table td {
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem;
    }
    .rv-verb { white-space: normal; }
  }
</style>
